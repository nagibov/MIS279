<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Week 4 - APIs & Backend Fundamentals | MIS 276</title>
  <link rel="stylesheet" href="../styles.css">
  <style>
    .deck {
      background: var(--bg-primary);
      color: var(--text-primary);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .slide {
      padding: 3rem;
      min-height: 90vh;
      display: none;
      border: 2px solid var(--border);
      margin: 1rem;
      border-radius: 16px;
      background: var(--bg-primary);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    .slide.active {
      display: block;
    }
    .slide h1 {
      color: var(--accent-primary);
      font-size: 2.5rem;
      margin-bottom: 2rem;
      border-bottom: 3px solid var(--accent-primary);
      padding-bottom: 1rem;
    }
    .slide h2 {
      color: var(--accent-primary);
      font-size: 2rem;
      margin: 1.5rem 0 1rem;
    }
    .slide h3 {
      color: var(--accent-secondary);
      font-size: 1.5rem;
      margin: 1.25rem 0 0.75rem;
    }
    .slide ul {
      font-size: 1.25rem;
      line-height: 1.6;
      margin: 1rem 0;
    }
    .slide li {
      margin: 0.75rem 0;
      padding-left: 0.5rem;
    }
    .slide pre {
      background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%);
      border: none;
      border-radius: 12px;
      padding: 2rem;
      font-size: 1rem;
      overflow-x: auto;
      margin: 1.5rem 0;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      position: relative;
    }
    
    .slide pre::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 40px;
      background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
      border-radius: 12px 12px 0 0;
    }
    
    .slide pre::after {
      content: '‚óè‚óè‚óè';
      position: absolute;
      top: 12px;
      left: 20px;
      color: rgba(255, 255, 255, 0.8);
      font-size: 14px;
      letter-spacing: 4px;
    }
    
    .slide code {
      background: rgba(255, 255, 255, 0.1);
      padding: 0.3rem 0.6rem;
      border-radius: 6px;
      font-family: 'Fira Code', 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Consolas', monospace;
      font-size: 0.95rem;
      color: #61dafb;
      border: 1px solid rgba(97, 218, 251, 0.3);
    }
    
    .slide pre code {
      background: none;
      padding: 0;
      border: none;
      color: #f8f8f2;
      font-family: 'Fira Code', 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Consolas', monospace;
      font-size: 1rem;
      line-height: 1.6;
      display: block;
      margin-top: 30px;
    }
    
    /* Syntax highlighting */
    .slide pre code .keyword {
      color: #ff79c6;
      font-weight: bold;
    }
    
    .slide pre code .string {
      color: #f1fa8c;
    }
    
    .slide pre code .comment {
      color: #6272a4;
      font-style: italic;
    }
    
    .slide pre code .function {
      color: #50fa7b;
    }
    
    .slide pre code .variable {
      color: #8be9fd;
    }
    
    .slide pre code .number {
      color: #bd93f9;
    }
    .kicker {
      color: var(--accent-primary);
      font-size: 1.1rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 1rem;
    }
    .notes {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      border-radius: 8px;
      padding: 1rem;
      margin: 1rem 0;
      font-size: 1rem;
      color: #856404;
    }
    .notes::before {
      content: "üìù Speaker Notes: ";
      font-weight: bold;
    }
    .highlight {
      background: #e3f2fd;
      border-left: 4px solid var(--accent-primary);
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 4px;
    }
    .controls {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
    }
    .controls button {
      margin: 0 5px;
      padding: 10px 15px;
      background: var(--accent-primary);
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
    }
    .controls button:hover {
      background: var(--accent-secondary);
    }
    .slide-counter {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: var(--bg-secondary);
      padding: 10px 15px;
      border-radius: 5px;
      border: 1px solid var(--border);
      font-weight: bold;
    }
    
    /* Visual Diagram Styles */
    .visual-diagram {
      margin: 2rem 0;
      padding: 2rem;
      background: #f8f9fa;
      border-radius: 12px;
      border: 2px solid var(--border);
    }
    
    .flow-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      margin: 1rem 0;
    }
    
    .flow-container.reverse {
      opacity: 0.6;
    }
    
    .flow-item {
      padding: 1rem 1.5rem;
      border-radius: 8px;
      font-weight: bold;
      min-width: 150px;
      text-align: center;
    }
    
    .flow-item.frontend {
      background: #e3f2fd;
      border: 2px solid #1976d2;
    }
    
    .flow-item.api {
      background: #fff3e0;
      border: 2px solid #f57c00;
    }
    
    .flow-item.database {
      background: #e8f5e8;
      border: 2px solid #388e3c;
      border-radius: 50px;
    }
    
    .flow-arrow {
      font-size: 1.2rem;
      font-weight: bold;
      color: var(--accent-primary);
    }
    
    .http-methods {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    .method-group {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .method {
      padding: 0.75rem 1.5rem;
      border-radius: 6px;
      font-weight: bold;
      min-width: 180px;
      text-align: center;
      color: white;
    }
    
    .method.get { background: #4caf50; }
    .method.post { background: #2196f3; }
    .method.put { background: #ff9800; }
    .method.delete { background: #f44336; }
    
    .operation {
      font-size: 1.1rem;
      color: var(--accent-primary);
      font-weight: bold;
    }
    
    .result {
      padding: 0.75rem 1rem;
      background: #e8f5e8;
      border-radius: 6px;
      border: 2px solid #4caf50;
    }
    
    .rest-flow {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
    }
    
    .rest-step {
      padding: 1rem 2rem;
      background: white;
      border: 2px solid var(--border);
      border-radius: 8px;
      font-weight: bold;
      min-width: 200px;
      text-align: center;
    }
    
    .rest-step.highlight {
      background: #fff3e0;
      border-color: #f57c00;
    }
    
    .rest-step.success {
      background: #e8f5e8;
      border-color: #4caf50;
    }
    
    .arrow-down {
      font-size: 1.5rem;
      color: var(--accent-primary);
      font-weight: bold;
    }
    
    .event-loop {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
    }
    
    .loop-step {
      padding: 1rem 1.5rem;
      background: white;
      border: 2px solid var(--border);
      border-radius: 8px;
      font-weight: bold;
      min-width: 180px;
      text-align: center;
    }
    
    .loop-step.start {
      background: #e3f2fd;
      border-color: #1976d2;
    }
    
    .loop-step.highlight {
      background: #fff3e0;
      border-color: #f57c00;
    }
    
    .loop-step.success {
      background: #e8f5e8;
      border-color: #4caf50;
    }
    
    .decision {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
    }
    
    .decision-box {
      padding: 1rem;
      background: #fff3e0;
      border: 2px solid #f57c00;
      border-radius: 50px;
      font-weight: bold;
    }
    
    .decision-paths {
      display: flex;
      gap: 2rem;
    }
    
    .path {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
    }
    
    .path-label {
      font-weight: bold;
      color: var(--accent-primary);
    }
    
    .sequence-flow {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
    }
    
    .sequence-step {
      padding: 1rem 2rem;
      background: white;
      border: 2px solid var(--border);
      border-radius: 8px;
      font-weight: bold;
      min-width: 250px;
      text-align: center;
    }
    
    .sequence-step.success {
      background: #e8f5e8;
      border-color: #4caf50;
    }
    
    .api-flow {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
    }
    
    .flow-step {
      padding: 1rem 2rem;
      border-radius: 8px;
      font-weight: bold;
      min-width: 200px;
      text-align: center;
      border: 2px solid var(--border);
    }
    
    .flow-step.client {
      background: #e3f2fd;
      border-color: #1976d2;
    }
    
    .flow-step.route {
      background: #f3e5f5;
      border-color: #7b1fa2;
    }
    
    .flow-step.controller {
      background: #fff3e0;
      border-color: #f57c00;
    }
    
    .flow-step.database {
      background: #e0f2f1;
      border-color: #00695c;
    }
    
    .flow-step.success {
      background: #e8f5e8;
      border-color: #4caf50;
    }
    
    .crud-operations {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    .crud-item {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .crud-method {
      padding: 0.75rem 1.5rem;
      border-radius: 6px;
      font-weight: bold;
      min-width: 160px;
      text-align: center;
      color: white;
    }
    
    .crud-method.create { background: #2196f3; }
    .crud-method.read { background: #4caf50; }
    .crud-method.update { background: #ff9800; }
    .crud-method.delete { background: #f44336; }
    
    .crud-arrow {
      font-size: 1.2rem;
      font-weight: bold;
      color: var(--accent-primary);
    }
    
    .crud-action {
      padding: 0.75rem 1rem;
      background: #f5f5f5;
      border-radius: 6px;
      border: 2px solid var(--border);
      font-family: monospace;
      font-weight: bold;
    }
    
    .postman-flow {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    .test-group {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .test-method {
      padding: 0.75rem 1.5rem;
      border-radius: 6px;
      font-weight: bold;
      min-width: 180px;
      text-align: center;
      color: white;
    }
    
    .test-method.get { background: #4caf50; }
    .test-method.post { background: #2196f3; }
    .test-method.put { background: #ff9800; }
    .test-method.delete { background: #f44336; }
    
    .test-arrow {
      font-size: 1.2rem;
      font-weight: bold;
      color: var(--accent-primary);
    }
    
    .test-result {
      padding: 0.75rem 1rem;
      background: #e8f5e8;
      border-radius: 6px;
      border: 2px solid #4caf50;
      font-weight: bold;
    }
    
    .export-note {
      text-align: center;
      font-size: 1.1rem;
      font-weight: bold;
      color: var(--accent-primary);
      margin-top: 1rem;
      padding: 1rem;
      background: #fff3e0;
      border-radius: 8px;
    }
    .mermaid {
      text-align: center;
      margin: 2rem 0;
    }
  </style>
</head>
<body class="deck">
  
  <!-- Slide 1: Title -->
  <div class="slide active">
    <div class="kicker">MIS 276 - Week 4</div>
    <h1>Understanding REST APIs & Node.js</h1>
    <h2>Learning Outcomes</h2>
    <ul>
      <li>Explain client‚Äìserver‚Äìdatabase roles</li>
      <li>Describe REST conventions and HTTP verbs</li>
      <li>Read JSON responses and status codes</li>
      <li>Recognize Node.js + Express architecture</li>
    </ul>
    <div class="notes">
      Bridge DB work (Weeks 3‚Äì4) to dynamic APIs. Keep focus on mental model before coding.
    </div>
  </div>

  <!-- Slide 2: The Big Picture -->
  <div class="slide">
    <h1>The Big Picture (Architecture)</h1>
    <div class="visual-diagram">
      <div class="flow-container">
        <div class="flow-item frontend">Browser / Frontend</div>
        <div class="flow-arrow">‚Üí HTTP/JSON ‚Üí</div>
        <div class="flow-item api">Express API (Node.js)</div>
        <div class="flow-arrow">‚Üí SQL queries ‚Üí</div>
        <div class="flow-item database">MSSQL Database</div>
      </div>
      <div class="flow-container reverse">
        <div class="flow-item frontend"></div>
        <div class="flow-arrow">‚Üê JSON Response ‚Üê</div>
        <div class="flow-item api"></div>
        <div class="flow-arrow">‚Üê Raw Data ‚Üê</div>
        <div class="flow-item database"></div>
      </div>
    </div>
    <ul>
      <li><strong>Key Path:</strong> Request ‚Üí Route ‚Üí Controller ‚Üí DB ‚Üí Response</li>
      <li>Stateless, resource-based interactions</li>
    </ul>
    <div class="notes">
      Emphasize separation of concerns: frontend shows; API decides; DB persists.
    </div>
  </div>

  <!-- Slide 3: What Is an API? -->
  <div class="slide">
    <h1>What Is an API?</h1>
    <div class="visual-diagram">
      <div class="http-methods">
        <div class="method-group">
          <div class="method get">GET /books</div>
          <div class="operation">‚Üí Read Books ‚Üí</div>
          <div class="result">JSON Response</div>
        </div>
        <div class="method-group">
          <div class="method post">POST /orders</div>
          <div class="operation">‚Üí Create Order ‚Üí</div>
          <div class="result">JSON Response</div>
        </div>
        <div class="method-group">
          <div class="method put">PUT /books/42</div>
          <div class="operation">‚Üí Update Book ‚Üí</div>
          <div class="result">JSON Response</div>
        </div>
        <div class="method-group">
          <div class="method get">GET /customers</div>
          <div class="operation">‚Üí Read Customers ‚Üí</div>
          <div class="result">JSON Response</div>
        </div>
      </div>
    </div>
    <ul>
      <li>Resource-oriented URLs (nouns): <code>/books</code>, <code>/orders</code>, <code>/customers</code></li>
      <li>HTTP methods: <strong>GET</strong>, <strong>POST</strong>, <strong>PUT</strong>, <strong>DELETE</strong></li>
      <li>Response format: <strong>JSON</strong> + <strong>status codes</strong></li>
    </ul>
    <div class="notes">
      Bookstore e-commerce: books, authors, customers, orders, payments.
    </div>
  </div>

  <!-- Slide 4: REST Principles -->
  <div class="slide">
    <h1>REST Principles</h1>
    <div class="visual-diagram">
      <div class="rest-flow">
        <div class="rest-step">Client Request</div>
        <div class="arrow-down">‚Üì</div>
        <div class="rest-step">Stateless Processing</div>
        <div class="arrow-down">‚Üì</div>
        <div class="rest-step highlight">Uniform Interface</div>
        <div class="arrow-down">‚Üì</div>
        <div class="rest-step">Resource Identification</div>
        <div class="arrow-down">‚Üì</div>
        <div class="rest-step">Cacheable Response</div>
        <div class="arrow-down">‚Üì</div>
        <div class="rest-step success">Server Response</div>
      </div>
    </div>
    <ul>
      <li><strong>Uniform interface</strong> - Consistent way to interact with resources</li>
      <li><strong>Stateless requests</strong> - Each request contains all needed information</li>
      <li><strong>Layered system</strong> - Client doesn't need to know internal architecture</li>
      <li><strong>Cacheable responses</strong> - Where appropriate for performance</li>
      <li><strong>Consistent resource schemas</strong> - Predictable data structures</li>
    </ul>
    <div class="notes">
      Ask: Why must <code>/orders/15</code> always return the same shape?
    </div>
  </div>

  <!-- Slide 5: HTTP Status Codes -->
  <div class="slide">
    <h1>HTTP Status Codes Cheat Sheet</h1>
    <div class="highlight">
      <h3>Success Codes</h3>
      <ul>
        <li><strong>200 OK</strong> - Request successful</li>
        <li><strong>201 Created</strong> - Resource created successfully</li>
      </ul>
    </div>
    <div class="highlight">
      <h3>Client Error Codes</h3>
      <ul>
        <li><strong>400 Bad Request</strong> - Invalid request format</li>
        <li><strong>401 Unauthorized</strong> - Authentication required</li>
        <li><strong>403 Forbidden</strong> - Access denied</li>
        <li><strong>404 Not Found</strong> - Resource doesn't exist</li>
      </ul>
    </div>
    <div class="highlight">
      <h3>Server Error Codes</h3>
      <ul>
        <li><strong>500 Server Error</strong> - Internal server problem</li>
      </ul>
    </div>
    <div class="notes">
      Encourage using precise codes; avoids "everything is 200" anti-pattern.
    </div>
  </div>

  <!-- Slide 6: Node.js & Express Basics -->
  <div class="slide">
    <h1>Node.js & Express Basics</h1>
    <div class="visual-diagram">
      <div class="event-loop">
        <div class="loop-step start">Incoming Request</div>
        <div class="arrow-down">‚Üì</div>
        <div class="loop-step highlight">Event Loop</div>
        <div class="arrow-down">‚Üì</div>
        <div class="loop-step">Call Stack</div>
        <div class="decision">
          <div class="decision-box">Sync Operation?</div>
          <div class="decision-paths">
            <div class="path">
              <span class="path-label">Yes ‚Üí</span>
              <div class="loop-step">Execute Immediately</div>
              <div class="arrow-down">‚Üì</div>
              <div class="loop-step success">Send Response</div>
            </div>
            <div class="path">
              <span class="path-label">No ‚Üí</span>
              <div class="loop-step">Thread Pool</div>
              <div class="arrow-down">‚Üì</div>
              <div class="loop-step">Database Query</div>
              <div class="arrow-down">‚Üì</div>
              <div class="loop-step">Callback Queue</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <ul>
      <li><strong>V8 engine</strong> - Chrome's JavaScript engine</li>
      <li><strong>Event loop</strong> - Non-blocking I/O operations</li>
      <li><strong>npm ecosystem</strong> - Rich package management</li>
      <li><strong>Express</strong> - Minimal routing and middleware framework</li>
    </ul>
    <h3>Typical Project Structure:</h3>
    <pre><code>project/
  server.js
  routes/
  controllers/
  db/
  .env</code></pre>
    <div class="notes">
      Keep files short; move SQL to model/service layer.
    </div>
  </div>

  <!-- Slide 7: Database Connection -->
  <div class="slide">
    <h1>DB Connection (MSSQL)</h1>
    <div class="visual-diagram">
      <div class="sequence-flow">
        <div class="sequence-step">1. Load .env variables</div>
        <div class="arrow-down">‚Üì</div>
        <div class="sequence-step">2. Create connection pool</div>
        <div class="arrow-down">‚Üì</div>
        <div class="sequence-step">3. Establish secure connection</div>
        <div class="arrow-down">‚Üì</div>
        <div class="sequence-step success">4. Pool ready for queries</div>
      </div>
    </div>
    <pre><code><span class="comment">// db/config.js</span>
<span class="keyword">import</span> sql <span class="keyword">from</span> <span class="string">"mssql"</span>;
<span class="keyword">import</span> dotenv <span class="keyword">from</span> <span class="string">"dotenv"</span>;
dotenv.<span class="function">config</span>();

<span class="keyword">const</span> <span class="variable">dbConfig</span> = {
  user: process.env.<span class="variable">DB_USER</span>,
  password: process.env.<span class="variable">DB_PASS</span>,
  server: process.env.<span class="variable">DB_SERVER</span>,
  database: <span class="string">"ClassDemo"</span>, <span class="comment">// Bookstore database</span>
  options: { encrypt: <span class="keyword">true</span>, trustServerCertificate: <span class="keyword">true</span> }
};

<span class="keyword">export const</span> <span class="variable">pool</span> = <span class="keyword">await</span> sql.<span class="function">connect</span>(dbConfig);
<span class="keyword">export</span> { sql };</code></pre>
    <div class="notes">
      Use environment variables; never hardcode secrets.
    </div>
  </div>

  <!-- Slide 8: Sample Query Controller -->
  <div class="slide">
    <h1>Sample Query (Controller)</h1>
    <div class="visual-diagram">
      <div class="api-flow">
        <div class="flow-step client">Client: GET /books</div>
        <div class="arrow-down">‚Üì</div>
        <div class="flow-step route">Express Route</div>
        <div class="arrow-down">‚Üì</div>
        <div class="flow-step controller">Controller: listBooks()</div>
        <div class="arrow-down">‚Üì</div>
        <div class="flow-step database">Database: JOIN Books + Authors</div>
        <div class="arrow-down">‚Üì</div>
        <div class="flow-step success">Response: 200 + JSON book data</div>
      </div>
    </div>
    <pre><code><span class="comment">// controllers/books.js</span>
<span class="keyword">import</span> { pool } <span class="keyword">from</span> <span class="string">"../db/config.js"</span>;

<span class="keyword">export async function</span> <span class="function">listBooks</span>(<span class="variable">req</span>, <span class="variable">res</span>) {
  <span class="keyword">const</span> <span class="variable">result</span> = <span class="keyword">await</span> pool.<span class="function">request</span>()
    .<span class="function">query</span>(<span class="string">`SELECT b.BookID, b.Title, b.Price, b.Genre, b.Stock,
             a.FirstName + ' ' + a.LastName AS Author
      FROM Books b
      JOIN Author_Book ab ON b.BookID = ab.BookId
      JOIN Authors a ON ab.AuthorId = a.AuthorID
      WHERE ab.isMain = 1`</span>);
  res.<span class="function">status</span>(<span class="number">200</span>).<span class="function">json</span>(result.recordset);
}</code></pre>
    <div class="notes">
      Return arrays for list endpoints; objects for single resources.
    </div>
  </div>

  <!-- Slide 9: Seed SQL -->
  <div class="slide">
    <h1>Seed SQL (Starter Data)</h1>
    <pre><code><span class="comment">-- seeds/books.sql</span>
<span class="keyword">INSERT INTO</span> Books (Title, ISBN, Genre, Price, Stock, PublishDate, Description)
<span class="keyword">VALUES</span> (<span class="string">'1984'</span>, <span class="string">'9780451524935'</span>, <span class="string">'Dystopian'</span>, <span class="number">12.99</span>, <span class="number">50</span>, <span class="string">'1949-06-08'</span>, 
        <span class="string">'A dystopian social science fiction novel.'</span>),
       (<span class="string">'Animal Farm'</span>, <span class="string">'9780451526342'</span>, <span class="string">'Political Satire'</span>, <span class="number">9.99</span>, <span class="number">40</span>, 
        <span class="string">'1945-08-17'</span>, <span class="string">'An allegorical novella.'</span>),
       (<span class="string">'Harry Potter and the Sorcerer\'s Stone'</span>, <span class="string">'9780439554930'</span>, 
        <span class="string">'Fantasy'</span>, <span class="number">14.99</span>, <span class="number">100</span>, <span class="string">'1997-06-26'</span>, 
        <span class="string">'The first novel in the Harry Potter series.'</span>);</code></pre>
    <div class="notes">
      Real bookstore data helps testing complex queries with joins to Authors and Orders.
    </div>
  </div>

  <!-- Slide 10: Mini Exercise -->
  <div class="slide">
    <h1>Mini-Exercise (Hands-on)</h1>
    <div class="highlight">
      <h3>Goal: Confirm API ‚Üí DB flow works with Bookstore</h3>
      <ol>
        <li>Create <code>GET /books</code> route with JOIN to Authors</li>
        <li>Connect to ClassDemo database and run query</li>
        <li>Test with Postman; screenshot JSON book data</li>
      </ol>
      <p><strong>Deliverable:</strong> Postman result showing books with author names</p>
    </div>
    <div class="notes">
      Walk the room; ensure ClassDemo database connection works and tables exist.
    </div>
  </div>

  <!-- Slide 11: Project Setup -->
  <div class="slide">
    <h1>Project Setup</h1>
    <h3>Initialize & Install Dependencies:</h3>
    <pre><code>npm init -y
npm i express mssql dotenv cors
npm i -D nodemon</code></pre>
    <h3>Update package.json:</h3>
    <pre><code>"scripts": {
  "start": "nodemon server.js"
}</code></pre>
    <div class="notes">
      If Windows + MSSQL local, confirm SQL Server Browser/ports are open.
    </div>
  </div>

  <!-- Slide 12: Minimal Server -->
  <div class="slide">
    <h1>Minimal Server</h1>
    <pre><code><span class="comment">// server.js</span>
<span class="keyword">import</span> express <span class="keyword">from</span> <span class="string">"express"</span>;
<span class="keyword">import</span> cors <span class="keyword">from</span> <span class="string">"cors"</span>;
<span class="keyword">import</span> { listBooks } <span class="keyword">from</span> <span class="string">"./controllers/books.js"</span>;

<span class="keyword">const</span> <span class="variable">app</span> = <span class="function">express</span>();
app.<span class="function">use</span>(<span class="function">cors</span>());
app.<span class="function">use</span>(express.<span class="function">json</span>());

app.<span class="function">get</span>(<span class="string">"/books"</span>, listBooks);
app.<span class="function">get</span>(<span class="string">"/orders"</span>, listOrders);
app.<span class="function">get</span>(<span class="string">"/customers"</span>, listCustomers);
app.<span class="function">listen</span>(<span class="number">4000</span>, () => console.<span class="function">log</span>(<span class="string">"Bookstore API on http://localhost:4000"</span>));</code></pre>
    <div class="notes">
      Keep the first success moment fast.
    </div>
  </div>

  <!-- Slide 13: Create (POST) Endpoint -->
  <div class="slide">
    <h1>Create (POST) Endpoint</h1>
    <pre><code><span class="keyword">import</span> { pool, sql } <span class="keyword">from</span> <span class="string">"../db/config.js"</span>;

<span class="keyword">export async function</span> <span class="function">createBook</span>(<span class="variable">req</span>, <span class="variable">res</span>) {
  <span class="keyword">const</span> { <span class="variable">title</span>, <span class="variable">isbn</span>, <span class="variable">genre</span>, <span class="variable">price</span>, <span class="variable">stock</span>, <span class="variable">description</span> } = req.body;
  <span class="keyword">await</span> pool.<span class="function">request</span>()
    .<span class="function">input</span>(<span class="string">"title"</span>, sql.NVarChar, title)
    .<span class="function">input</span>(<span class="string">"isbn"</span>, sql.NVarChar, isbn)
    .<span class="function">input</span>(<span class="string">"genre"</span>, sql.NVarChar, genre)
    .<span class="function">input</span>(<span class="string">"price"</span>, sql.<span class="function">Decimal</span>(<span class="number">10</span>,<span class="number">2</span>), price)
    .<span class="function">input</span>(<span class="string">"stock"</span>, sql.Int, stock)
    .<span class="function">input</span>(<span class="string">"desc"</span>, sql.NVarChar, description)
    .<span class="function">query</span>(<span class="string">`INSERT INTO Books(Title,ISBN,Genre,Price,Stock,Description)
             VALUES(@title,@isbn,@genre,@price,@stock,@desc)`</span>);
  res.<span class="function">status</span>(<span class="number">201</span>).<span class="function">json</span>({ message: <span class="string">"Book created"</span> });
}</code></pre>
    <div class="notes">
      Parameterize queries to prevent injection.
    </div>
  </div>

  <!-- Slide 14: Update & Delete -->
  <div class="slide">
    <h1>Update & Delete (PUT/DELETE)</h1>
    <div class="visual-diagram">
      <div class="crud-operations">
        <div class="crud-item">
          <div class="crud-method create">CREATE (POST)</div>
          <div class="crud-arrow">‚Üí</div>
          <div class="crud-action">INSERT INTO Books</div>
        </div>
        <div class="crud-item">
          <div class="crud-method read">READ (GET)</div>
          <div class="crud-arrow">‚Üí</div>
          <div class="crud-action">SELECT FROM Books JOIN Authors</div>
        </div>
        <div class="crud-item">
          <div class="crud-method update">UPDATE (PUT)</div>
          <div class="crud-arrow">‚Üí</div>
          <div class="crud-action">UPDATE Books SET</div>
        </div>
        <div class="crud-item">
          <div class="crud-method delete">DELETE (DELETE)</div>
          <div class="crud-arrow">‚Üí</div>
          <div class="crud-action">DELETE FROM Books</div>
        </div>
      </div>
    </div>
    <pre><code><span class="keyword">export async function</span> <span class="function">updateBook</span>(<span class="variable">req</span>, <span class="variable">res</span>) {
  <span class="keyword">const</span> <span class="variable">id</span> = +req.params.id;
  <span class="keyword">const</span> { <span class="variable">title</span>, <span class="variable">price</span>, <span class="variable">stock</span>, <span class="variable">genre</span> } = req.body;
  <span class="keyword">await</span> pool.<span class="function">request</span>()
    .<span class="function">input</span>(<span class="string">"id"</span>, sql.Int, id)
    .<span class="function">input</span>(<span class="string">"title"</span>, sql.NVarChar, title)
    .<span class="function">input</span>(<span class="string">"price"</span>, sql.<span class="function">Decimal</span>(<span class="number">10</span>,<span class="number">2</span>), price)
    .<span class="function">input</span>(<span class="string">"stock"</span>, sql.Int, stock)
    .<span class="function">input</span>(<span class="string">"genre"</span>, sql.NVarChar, genre)
    .<span class="function">query</span>(<span class="string">`UPDATE Books SET Title=@title, Price=@price, 
             Stock=@stock, Genre=@genre WHERE BookID=@id`</span>);
  res.<span class="function">json</span>({ message: <span class="string">"Book updated"</span> });
}

<span class="keyword">export async function</span> <span class="function">deleteBook</span>(<span class="variable">req</span>, <span class="variable">res</span>) {
  <span class="keyword">const</span> <span class="variable">id</span> = +req.params.id;
  <span class="keyword">await</span> pool.<span class="function">request</span>().<span class="function">input</span>(<span class="string">"id"</span>, sql.Int, id)
    .<span class="function">query</span>(<span class="string">"DELETE FROM Books WHERE BookID=@id"</span>);
  res.<span class="function">json</span>({ message: <span class="string">"Book deleted"</span> });
}</code></pre>
    <div class="notes">
      Return 404 if affectedRows=0 (extend as exercise).
    </div>
  </div>

  <!-- Slide 15: Postman Tests -->
  <div class="slide">
    <h1>Postman Tests (Hands-on)</h1>
    <div class="visual-diagram">
      <div class="postman-flow">
        <div class="test-group">
          <div class="test-method get">GET /books</div>
          <div class="test-arrow">‚Üí</div>
          <div class="test-result">200 OK + Book Array</div>
        </div>
        <div class="test-group">
          <div class="test-method post">POST /books</div>
          <div class="test-arrow">‚Üí</div>
          <div class="test-result">201 Book Created</div>
        </div>
        <div class="test-group">
          <div class="test-method get">GET /orders</div>
          <div class="test-arrow">‚Üí</div>
          <div class="test-result">200 OK + Orders</div>
        </div>
        <div class="test-group">
          <div class="test-method get">GET /customers</div>
          <div class="test-arrow">‚Üí</div>
          <div class="test-result">200 OK + Customers</div>
        </div>
        <div class="export-note">
          ‚Üì Export Bookstore API Collection ‚Üì
        </div>
      </div>
    </div>
    <h3>Test These Endpoints:</h3>
    <ul>
      <li><strong>GET</strong> <code>/books</code> - List books with authors</li>
      <li><strong>POST</strong> <code>/books</code> - Create new book (JSON body)</li>
      <li><strong>GET</strong> <code>/orders</code> - List customer orders</li>
      <li><strong>GET</strong> <code>/customers</code> - List all customers</li>
    </ul>
    <div class="highlight">
      <p><strong>Deliverable:</strong> Export Bookstore API collection</p>
    </div>
    <div class="notes">
      Encourage naming requests with verbs and expected codes.
    </div>
  </div>

  <!-- Navigation Controls -->
  <div class="controls">
    <button onclick="previousSlide()">‚Üê Previous</button>
    <button onclick="nextSlide()">Next ‚Üí</button>
  </div>

  <!-- Slide Counter -->
  <div class="slide-counter">
    <span id="current">1</span> / <span id="total">15</span>
  </div>

  <script>
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');
    const totalSlides = slides.length;

    document.getElementById('total').textContent = totalSlides;

    function showSlide(n) {
      slides[currentSlide].classList.remove('active');
      currentSlide = (n + totalSlides) % totalSlides;
      slides[currentSlide].classList.add('active');
      document.getElementById('current').textContent = currentSlide + 1;
    }

    function nextSlide() {
      showSlide(currentSlide + 1);
    }

    function previousSlide() {
      showSlide(currentSlide - 1);
    }

    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
      if (e.key === 'ArrowRight' || e.key === ' ') {
        nextSlide();
      } else if (e.key === 'ArrowLeft') {
        previousSlide();
      } else if (e.key === 'Home') {
        showSlide(0);
      } else if (e.key === 'End') {
        showSlide(totalSlides - 1);
      }
    });

    // Initialize
    showSlide(0);
  </script>
</body>
</html>